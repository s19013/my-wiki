import{m as A}from"./marked.esm.a0238cc0.js";import{T as x}from"./TagDialog.ae7ced91.js";import{D as w,l as S}from"./loadingDialog.2c7d45ac.js";import{B as V}from"./BaseLayout.4ba1edf1.js";import{s as L,l as o,b as u,i as E,h as l,e as r,g as e,n as m,d as F,k as M,w as g,v,x as N,j as f}from"./app.6c1b8228.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";const U={data(){return{activeTab:0,articleTitle:"",articleBody:"",articleLoding:!1,articleSending:!1,articleBodyErrorFlag:!1}},components:{DeleteAlertComponent:w,TagDialog:x,loadingDialog:S,BaseLayout:V},methods:{compiledMarkdown(){return A(this.articleBody)},changeTab(c){this.activeTab=c},submitCheck:_.debounce(_.throttle(async function(){if(this.articleBody==""){this.articleBodyErrorFlag=!0;return}else this.submit()},100),150),submit(){this.articleSending=!0,L.post("/api/article/store",{articleTitle:this.articleTitle,articleBody:this.articleBody,tagList:this.$refs.tagDialog.serveCheckedTagListToParent()}).then(c=>{this.$inertia.get("/Article/Search"),this.articleSending=!1}).catch(c=>{console.log(c),this.articleSending=!1})},deleteArticle(){this.$inertia.get("/Article/Search"),console.log("called")}}},j={class:"articleContainer"},z=f("mdi-content-save"),P=f(" \u4FDD\u5B58 "),q={class:"tabLabel"},G={key:0,class:"error articleError"},I=["innerHTML"];function J(c,a,K,O,t,i){const p=o("v-text-field"),n=o("v-col"),h=o("DeleteAlertComponent"),T=o("v-icon"),b=o("v-btn"),d=o("v-row"),B=o("TagDialog"),C=o("v-textarea"),k=o("v-form"),y=o("loadingDialog"),D=o("BaseLayout");return u(),E(D,{title:"\u65B0\u898F\u8A18\u4E8B\u4F5C\u6210",pageTitle:"\u65B0\u898F\u8A18\u4E8B\u4F5C\u6210"},{default:l(()=>[r("section",j,[e(k,{onSubmit:N(i.submit,["prevent"])},{default:l(()=>[e(d,{class:"head"},{default:l(()=>[e(n,{cols:"10"},{default:l(()=>[e(p,{modelValue:t.articleTitle,"onUpdate:modelValue":a[0]||(a[0]=s=>t.articleTitle=s),label:"\u30BF\u30A4\u30C8\u30EB"},null,8,["modelValue"])]),_:1}),e(n,{cols:"1"},{default:l(()=>[e(h,{onDeleteAricleTrigger:i.deleteArticle},null,8,["onDeleteAricleTrigger"])]),_:1}),e(n,{cols:"1"},{default:l(()=>[e(b,{class:"longButton",color:"#BBDEFB",onClick:i.submitCheck,disabled:t.articleSending},{default:l(()=>[e(T,null,{default:l(()=>[z]),_:1}),P]),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(n,null,{default:l(()=>[r("ul",q,[r("li",{onClick:a[1]||(a[1]=s=>i.changeTab(0)),class:m({active:t.activeTab===0,notActive:t.activeTab!==0})}," \u672C\u6587 ",2),r("li",{onClick:a[2]||(a[2]=s=>i.changeTab(1)),class:m({active:t.activeTab===1,notActive:t.activeTab!==1})}," \u5909\u63DB\u5F8C ",2)])]),_:1}),e(n,null,{default:l(()=>[t.articleBodyErrorFlag?(u(),F("p",G,"\u672C\u6587\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044")):M("",!0)]),_:1}),e(n,{cols:"2"},{default:l(()=>[e(B,{ref:"tagDialog",originalCheckedTag:null},null,512)]),_:1})]),_:1}),g(r("div",null,[e(C,{filled:"","auto-grow":"",label:"\u672C\u6587 [\u5FC5\u9808]",modelValue:t.articleBody,"onUpdate:modelValue":a[3]||(a[3]=s=>t.articleBody=s)},null,8,["modelValue"])],512),[[v,t.activeTab===0]]),g(r("div",{class:"markdown",innerHTML:i.compiledMarkdown()},null,8,I),[[v,t.activeTab===1]])]),_:1},8,["onSubmit"])]),e(y,{loadingFlag:t.articleSending},null,8,["loadingFlag"])]),_:1})}var $=H(U,[["render",J]]);export{$ as default};
