import{m as w}from"./marked.esm.a0238cc0.js";import{T as S}from"./TagDialog.ae7ced91.js";import{D as V,l as L}from"./loadingDialog.2c7d45ac.js";import{B as E}from"./BaseLayout.4ba1edf1.js";import{s as g,l as i,b as u,i as F,h as l,e as c,g as e,n as m,d as M,k as N,w as h,v,x as H,j as f}from"./app.6c1b8228.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";const U={data(){return{activeTab:0,articleTitle:"",articleBody:"",articleLoding:!1,articleSending:!1,articleBodyErrorFlag:!1}},props:["originalArticle","originalCheckedTag"],components:{DeleteAlertComponent:V,TagDialog:S,loadingDialog:L,BaseLayout:E},methods:{compiledMarkdown(){return w(this.articleBody)},changeTab(a){this.activeTab=a},submitCheck:_.debounce(_.throttle(async function(){if(this.articleBody==""){this.articleBodyErrorFlag=!0;return}else this.submit()},100),150),submit(){this.articleSending=!0,g.post("/api/article/update",{articleId:this.originalArticle.id,articleTitle:this.articleTitle,articleBody:this.articleBody,tagList:this.$refs.tagDialog.serveCheckedTagListToParent()}).then(a=>{this.articleSending=!1,this.$inertia.get("/Article/Search")})},deleteArticle(){this.articleDeleting=!0,g.post("/api/article/delete",{articleId:this.originalArticle.id}).then(a=>{this.$inertia.get("/Article/Search"),this.articleDeleting=!1}).catch(a=>{console.log(a),this.articleSending=!1})}},mounted(){this.articleTitle=this.originalArticle.title,this.articleBody=this.originalArticle.body}},j={class:"articleContainer"},z=f("mdi-content-save"),P=f(" \u4FDD\u5B58 "),q={class:"tabLabel"},G={key:0,class:"error articleError"},J=["innerHTML"];function K(a,o,p,O,t,n){const T=i("v-text-field"),r=i("v-col"),b=i("DeleteAlertComponent"),B=i("v-icon"),k=i("v-btn"),d=i("v-row"),y=i("TagDialog"),C=i("v-textarea"),A=i("v-form"),D=i("loadingDialog"),x=i("BaseLayout");return u(),F(x,{title:"\u8A18\u4E8B\u7DE8\u96C6",pageTitle:"\u8A18\u4E8B\u7DE8\u96C6"},{default:l(()=>[c("section",j,[e(A,{onSubmit:H(n.submit,["prevent"])},{default:l(()=>[e(d,{class:"head"},{default:l(()=>[e(r,{cols:"10"},{default:l(()=>[e(T,{modelValue:t.articleTitle,"onUpdate:modelValue":o[0]||(o[0]=s=>t.articleTitle=s),label:"\u30BF\u30A4\u30C8\u30EB"},null,8,["modelValue"])]),_:1}),e(r,{cols:"1"},{default:l(()=>[e(b,{onDeleteAricleTrigger:n.deleteArticle},null,8,["onDeleteAricleTrigger"])]),_:1}),e(r,{cols:"1"},{default:l(()=>[e(k,{class:"longButton",color:"#BBDEFB",onClick:n.submitCheck,disabled:t.articleSending},{default:l(()=>[e(B,null,{default:l(()=>[z]),_:1}),P]),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(r,null,{default:l(()=>[c("ul",q,[c("li",{onClick:o[1]||(o[1]=s=>n.changeTab(0)),class:m({active:t.activeTab===0,notActive:t.activeTab!==0})}," \u672C\u6587 ",2),c("li",{onClick:o[2]||(o[2]=s=>n.changeTab(1)),class:m({active:t.activeTab===1,notActive:t.activeTab!==1})}," \u5909\u63DB\u5F8C ",2)])]),_:1}),e(r,null,{default:l(()=>[t.articleBodyErrorFlag?(u(),M("p",G,"\u672C\u6587\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044")):N("",!0)]),_:1}),e(r,{cols:"2"},{default:l(()=>[e(y,{ref:"tagDialog",originalCheckedTag:p.originalCheckedTag},null,8,["originalCheckedTag"])]),_:1})]),_:1}),h(c("div",null,[e(C,{filled:"","auto-grow":"",label:"\u672C\u6587 [\u5FC5\u9808]",modelValue:t.articleBody,"onUpdate:modelValue":o[3]||(o[3]=s=>t.articleBody=s)},null,8,["modelValue"])],512),[[v,t.activeTab===0]]),h(c("div",{class:"markdown",innerHTML:n.compiledMarkdown()},null,8,J),[[v,t.activeTab===1]])]),_:1},8,["onSubmit"])]),e(D,{loadingFlag:t.articleSending},null,8,["loadingFlag"])]),_:1})}var $=I(U,[["render",K]]);export{$ as default};
